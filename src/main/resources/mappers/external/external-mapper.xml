<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="external">

    <!-- 모든 연락처를 조회하는 쿼리 -->
    <select id="getAllContacts" resultType="ExternalDto">
        SELECT * FROM AB_EXTERNAL WHERE AB_EXTERNAL_DELETE = 'N'
    </select>

    <!-- ID로 연락처를 조회하는 쿼리 -->
    <select id="getContactById" parameterType="int" resultType="ExternalDto">
        SELECT * FROM AB_EXTERNAL WHERE AB_EXTERNAL_KEY = #{AB_EXTERNAL_KEY}
    </select>

    <!-- 새 연락처를 추가하는 쿼리 -->
    <insert id="addContact" parameterType="ExternalDto">
        INSERT INTO AB_EXTERNAL (
            AB_EXTERNAL_KEY, MEMBER_KEY, AB_EXTERNAL_NAME, AB_EXTERNAL_TELL, AB_EXTERNAL_EMAIL,
            AB_EXTERNAL_GENDER, AB_EXTERNAL_DEPARTMENT, AB_EXTERNAL_JOB, AB_EXTERNAL_MEMO,
            AB_EXTERNAL_BOOKMARK, AB_EXTERNAL_COMPANY, AB_EXTERNAL_DELETE
        ) VALUES (
            #{AB_EXTERNAL_KEY}, #{MEMBER_KEY}, #{AB_EXTERNAL_NAME}, #{AB_EXTERNAL_TELL}, #{AB_EXTERNAL_EMAIL},
            #{AB_EXTERNAL_GENDER}, #{AB_EXTERNAL_DEPARTMENT}, #{AB_EXTERNAL_JOB}, #{AB_EXTERNAL_MEMO},
            #{AB_EXTERNAL_BOOKMARK}, #{AB_EXTERNAL_COMPANY}, #{AB_EXTERNAL_DELETE}
        )
    </insert>

    <!-- 연락처를 업데이트하는 쿼리 -->
    <update id="updateContact" parameterType="ExternalDto">
        UPDATE AB_EXTERNAL
        SET
            MEMBER_KEY = #{MEMBER_KEY},
            AB_EXTERNAL_NAME = #{AB_EXTERNAL_NAME},
            AB_EXTERNAL_TELL = #{AB_EXTERNAL_TELL},
            AB_EXTERNAL_EMAIL = #{AB_EXTERNAL_EMAIL},
            AB_EXTERNAL_GENDER = #{AB_EXTERNAL_GENDER},
            AB_EXTERNAL_DEPARTMENT = #{AB_EXTERNAL_DEPARTMENT},
            AB_EXTERNAL_JOB = #{AB_EXTERNAL_JOB},
            AB_EXTERNAL_MEMO = #{AB_EXTERNAL_MEMO},
            AB_EXTERNAL_BOOKMARK = #{AB_EXTERNAL_BOOKMARK},
            AB_EXTERNAL_COMPANY = #{AB_EXTERNAL_COMPANY},
            AB_EXTERNAL_DELETE = #{AB_EXTERNAL_DELETE}
        WHERE AB_EXTERNAL_KEY = #{AB_EXTERNAL_KEY}
    </update>

    <!-- 연락처를 삭제하는 쿼리 -->
    <delete id="deleteContact" parameterType="int">
        DELETE FROM AB_EXTERNAL WHERE AB_EXTERNAL_KEY = #{AB_EXTERNAL_KEY}
    </delete>

</mapper>
